{% extends "base.html" %}

{% block title %}Study Materials - IT Department{% endblock %}

{% block content %}
<style>
/* Keeping your beautiful Gradient Header */
.page-header {
    background: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%);
    color: rgb(128, 128, 128);
    padding: 3rem 0;
    margin: -1rem -1rem 2rem -1rem;
    border-radius: 0 0 15px 15px;
}
.nav-pills .nav-link {
    color: #5c5c5c;
    background-color: rgb(136, 136, 136);
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    margin: 0 5px;
    border-radius: 50px;
    padding: 10px 25px;
    font-weight: 600;
}
.nav-pills .nav-link.active {
    background: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%);
    color: rgb(112, 112, 112);
}
.material-card {
    transition: transform 0.2s;
    border: none;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}
.material-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
}
</style>

<header class="page-header-bg">
    <ul class="circles"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>
    <div class="container text-center position-relative z-2">
        <h1 class="display-4 fw-bold mb-2">Study Materials</h1>
        <p class="lead text-white-50">Select your Year and Semester to find resources</p>
    </div>
</header>

<div class="container py-4 mb-5">

    <ul class="nav nav-pills nav-fill mb-5 justify-content-center gap-3" id="yearTabs" role="tablist" data-aos="fade-up">
        {% for year, semesters in materials.items() %}
        <li class="nav-item" role="presentation">
            <button class="nav-link shadow-sm fw-bold rounded-pill px-4 py-3 {% if loop.first %}active{% endif %}" 
                    id="tab-{{ loop.index }}" 
                    data-bs-toggle="pill" 
                    data-bs-target="#content-{{ loop.index }}" 
                    type="button" 
                    role="tab"
                    style="border: 1px solid #eee;">
                {{ year }}
            </button>
        </li>
        {% endfor %}
    </ul>

    <div class="tab-content" id="yearTabsContent">
        {% for year, semesters in materials.items() %}
        <div class="tab-pane fade {% if loop.first %}show active{% endif %}" 
             id="content-{{ loop.index }}" 
             role="tabpanel">
            
            <div class="row g-4">
                {% for sem_name, items in semesters.items() %}
                <div class="col-md-6" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
                    <div class="card h-100 border-0 shadow-sm hover-card" style="border-radius: 15px;">
                        
                        <div class="card-header bg-white border-0 pt-4 px-4 d-flex align-items-center">
                            <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3 text-primary">
                                <i class="bi bi-folder2-open fs-4"></i>
                            </div>
                            <h4 class="fw-bold text-dark mb-0">
                                {{ sem_name }}
                            </h4>
                        </div>

                        <div class="card-body px-4 pb-4">
                            {% if items %}
                                <div class="list-group list-group-flush mt-2">
                                    {% for material in items %}
                                    <a href="{{ material.file_link }}" target="_blank" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3 border-0 bg-light mb-2 rounded transition-hover">
                                        <div class="d-flex align-items-center overflow-hidden">
                                            <i class="bi bi-file-earmark-pdf-fill text-danger fs-4 me-3 flex-shrink-0"></i>
                                            <div class="text-truncate">
                                                <div class="fw-bold text-dark text-truncate">{{ material.title }}</div>
                                                <div class="small text-muted">{{ material.subject }}</div>
                                            </div>
                                        </div>
                                        <i class="bi bi-box-arrow-up-right text-primary ms-2"></i>
                                    </a>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="text-center py-4 text-muted">
                                    <i class="bi bi-folder-x fs-1 opacity-25"></i>
                                    <p class="mt-2 small mb-0">No materials uploaded yet</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

        </div>
        {% endfor %}
    </div>

    {% if not materials %}
    <div class="text-center py-5">
        <i class="bi bi-inbox fs-1 text-muted mb-3"></i>
        <h3 class="text-muted">No materials found</h3>
        <p class="text-muted">Check back later for updates.</p>
    </div>
    {% endif %}

</div>
{% endblock %}